---
http_interactions:
- request:
    method: post
    uri: https://scholarsphere.test/api/v1/uploads
    body:
      encoding: UTF-8
      string: '{"extension":".png"}'
    headers:
      Content-Type:
      - application/json
      X-Api-Key:
      - db9c21583ea98d16e42a73d9f78897c1ffc1dffcae781eb17f841cf421bd22b7a1a1228226437c5fdf6b6c9a8f537b17
      User-Agent:
      - Faraday v1.0.1
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate
      Content-Type:
      - application/json; charset=utf-8
      Etag:
      - W/"c2723823d6f1d4f42b84ad8f99edebee"
      Referrer-Policy:
      - strict-origin-when-cross-origin
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Frame-Options:
      - SAMEORIGIN
      X-Permitted-Cross-Domain-Policies:
      - none
      X-Request-Id:
      - 1ead4b9f-af66-41dd-ae62-f8838d65c11a
      X-Runtime:
      - '0.011842'
      X-Xss-Protection:
      - 1; mode=block
      Date:
      - Wed, 03 Mar 2021 19:56:33 GMT
      Content-Length:
      - '445'
    body:
      encoding: UTF-8
      string: '{"url":"http://127.0.0.1:9000/scholarsphere-dev/cache/9f5431e2-778d-47ed-b371-d23e97d249ce.png?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=scholarsphere%2F20210303%2Fus-east-1%2Fs3%2Faws4_request\u0026X-Amz-Date=20210303T195633Z\u0026X-Amz-Expires=900\u0026X-Amz-SignedHeaders=host\u0026X-Amz-Signature=d7773bf923c73e3bc467a4081d4c964de7eb166c3a052300369d3a508fd0d06c","id":"9f5431e2-778d-47ed-b371-d23e97d249ce.png","prefix":"cache"}'
  recorded_at: Wed, 03 Mar 2021 19:56:33 GMT
- request:
    method: put
    uri: http://127.0.0.1:9000/scholarsphere-dev/cache/9f5431e2-778d-47ed-b371-d23e97d249ce.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=scholarsphere/20210303/us-east-1/s3/aws4_request&X-Amz-Date=20210303T195633Z&X-Amz-Expires=900&X-Amz-Signature=d7773bf923c73e3bc467a4081d4c964de7eb166c3a052300369d3a508fd0d06c&X-Amz-SignedHeaders=host
    body:
      encoding: UTF-8
      base64_string: 'imagecontent'
    headers:
      User-Agent:
      - Faraday v1.0.1
      Content-Md5:
      - MwNrG//gg8XTCCTx/yBLkA==
      Content-Type:
      - application/x-www-form-urlencoded
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Accept-Ranges:
      - bytes
      Content-Length:
      - '0'
      Content-Security-Policy:
      - block-all-mixed-content
      Etag:
      - '"33036b1bffe083c5d30824f1ff204b90"'
      Server:
      - MinIO/RELEASE.2020-07-31T03-39-05Z
      Vary:
      - Origin
      X-Amz-Request-Id:
      - 1668ED4FED2A188C
      X-Xss-Protection:
      - 1; mode=block
      Date:
      - Wed, 03 Mar 2021 19:56:33 GMT
    body:
      encoding: UTF-8
      string: ''
  recorded_at: Wed, 03 Mar 2021 19:56:33 GMT
- request:
    method: post
    uri: https://scholarsphere.test/api/v1/uploads
    body:
      encoding: UTF-8
      string: '{"extension":".pdf"}'
    headers:
      Content-Type:
      - application/json
      X-Api-Key:
      - db9c21583ea98d16e42a73d9f78897c1ffc1dffcae781eb17f841cf421bd22b7a1a1228226437c5fdf6b6c9a8f537b17
      User-Agent:
      - Faraday v1.0.1
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate
      Content-Type:
      - application/json; charset=utf-8
      Etag:
      - W/"1d09d9d79587818b4076f7f9f99ff978"
      Referrer-Policy:
      - strict-origin-when-cross-origin
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Frame-Options:
      - SAMEORIGIN
      X-Permitted-Cross-Domain-Policies:
      - none
      X-Request-Id:
      - 4d29c184-08db-4760-ad8d-5fd9597663ff
      X-Runtime:
      - '0.007482'
      X-Xss-Protection:
      - 1; mode=block
      Date:
      - Wed, 03 Mar 2021 19:56:33 GMT
      Content-Length:
      - '445'
    body:
      encoding: UTF-8
      string: '{"url":"http://127.0.0.1:9000/scholarsphere-dev/cache/effb3cd6-5082-4da0-88ea-5ac5144adbf6.pdf?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=scholarsphere%2F20210303%2Fus-east-1%2Fs3%2Faws4_request\u0026X-Amz-Date=20210303T195633Z\u0026X-Amz-Expires=900\u0026X-Amz-SignedHeaders=host\u0026X-Amz-Signature=3d8eab6659d8679af562d3e469173d891d2496fae7f7131374eaf2112b43bdb9","id":"effb3cd6-5082-4da0-88ea-5ac5144adbf6.pdf","prefix":"cache"}'
  recorded_at: Wed, 03 Mar 2021 19:56:33 GMT
- request:
    method: put
    uri: http://127.0.0.1:9000/scholarsphere-dev/cache/effb3cd6-5082-4da0-88ea-5ac5144adbf6.pdf?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=scholarsphere/20210303/us-east-1/s3/aws4_request&X-Amz-Date=20210303T195633Z&X-Amz-Expires=900&X-Amz-Signature=3d8eab6659d8679af562d3e469173d891d2496fae7f7131374eaf2112b43bdb9&X-Amz-SignedHeaders=host
    body:
      encoding: UTF-8
      base64_string: 'imagecontent'
    headers:
      User-Agent:
      - Faraday v1.0.1
      Content-Md5:
      - BMh4+xVJaKrfOkleICrlow==
      Content-Type:
      - application/x-www-form-urlencoded
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Accept-Ranges:
      - bytes
      Content-Length:
      - '0'
      Content-Security-Policy:
      - block-all-mixed-content
      Etag:
      - '"04c878fb154968aadf3a495e202ae5a3"'
      Server:
      - MinIO/RELEASE.2020-07-31T03-39-05Z
      Vary:
      - Origin
      X-Amz-Request-Id:
      - 1668ED4FEF9E85E4
      X-Xss-Protection:
      - 1; mode=block
      Date:
      - Wed, 03 Mar 2021 19:56:33 GMT
    body:
      encoding: UTF-8
      string: ''
  recorded_at: Wed, 03 Mar 2021 19:56:33 GMT
- request:
    method: post
    uri: https://scholarsphere.test/api/v1/ingest
    body:
      encoding: UTF-8
      string: '{"metadata":{"title":"Sample Title","creators_attributes":[{"display_name":"Dan
        Coughlin","actor_attributes":{"psu_id":"dmc186","surname":"Coughlin","given_name":"Dan","email":"dmc186@psu.edu"}}]},"content":[{"file":"{\"id\":\"9f5431e2-778d-47ed-b371-d23e97d249ce.png\",\"storage\":\"cache\",\"metadata\":{\"size\":63960,\"filename\":\"image.png\",\"mime_type\":\"image/png\"}}"},{"file":"{\"id\":\"effb3cd6-5082-4da0-88ea-5ac5144adbf6.pdf\",\"storage\":\"cache\",\"metadata\":{\"size\":16798,\"filename\":\"ipsum.pdf\",\"mime_type\":\"application/pdf\"}}"}],"depositor":{"psu_id":"agw13","surname":"Wead","given_name":"Adam","email":"agw13@psu.edu"},"permissions":{}}'
    headers:
      Content-Type:
      - application/json
      X-Api-Key:
      - db9c21583ea98d16e42a73d9f78897c1ffc1dffcae781eb17f841cf421bd22b7a1a1228226437c5fdf6b6c9a8f537b17
      User-Agent:
      - Faraday v1.0.1
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate
      Content-Type:
      - application/json; charset=utf-8
      Etag:
      - W/"5db7b28c570a22f4527766f50579b57c"
      Referrer-Policy:
      - strict-origin-when-cross-origin
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Frame-Options:
      - SAMEORIGIN
      X-Permitted-Cross-Domain-Policies:
      - none
      X-Request-Id:
      - 5158485d-31c4-441a-b722-bfbb766857a3
      X-Runtime:
      - '0.215453'
      X-Xss-Protection:
      - 1; mode=block
      Date:
      - Wed, 03 Mar 2021 19:56:34 GMT
      Content-Length:
      - '99'
    body:
      encoding: UTF-8
      string: '{"message":"Work was successfully created","url":"/resources/0797e99c-7d4f-4e05-8bf6-86aea1029a6a"}'
  recorded_at: Wed, 03 Mar 2021 19:56:34 GMT
recorded_with: VCR 6.0.0
