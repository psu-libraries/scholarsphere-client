---
http_interactions:
- request:
    method: post
    uri: http://scholarsphere.test/api/v1/uploads
    body:
      encoding: UTF-8
      string: '{"extension":".png"}'
    headers:
      Content-Type:
      - application/json
      X-Api-Key:
      - db9c21583ea98d16e42a73d9f78897c1ffc1dffcae781eb17f841cf421bd22b7a1a1228226437c5fdf6b6c9a8f537b17
      User-Agent:
      - Faraday v1.0.1
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate
      Content-Type:
      - application/json; charset=utf-8
      Etag:
      - W/"05fe8bcfe002993110c522e62944b82c"
      Referrer-Policy:
      - strict-origin-when-cross-origin
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Frame-Options:
      - SAMEORIGIN
      X-Permitted-Cross-Domain-Policies:
      - none
      X-Request-Id:
      - 56cb70fb-07f6-418b-a057-8f5ba934088f
      X-Runtime:
      - '0.024040'
      X-Xss-Protection:
      - 1; mode=block
      Date:
      - Mon, 18 Jan 2021 15:50:27 GMT
      Content-Length:
      - '436'
    body:
      encoding: UTF-8
      string: '{"url":"http://127.0.0.1:9000/scholarsphere-dev/cache/2c6b6f30-280c-4126-af21-8325db94cc71.png?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=asdf%2F20210118%2Fus-east-1%2Fs3%2Faws4_request\u0026X-Amz-Date=20210118T155027Z\u0026X-Amz-Expires=900\u0026X-Amz-SignedHeaders=host\u0026X-Amz-Signature=76bd006da99af0b0510ff0c39133c445d758529bbbe90669b48bfc333b8ceaeb","id":"2c6b6f30-280c-4126-af21-8325db94cc71.png","prefix":"cache"}'
  recorded_at: Mon, 18 Jan 2021 15:50:27 GMT
- request:
    method: put
    uri: http://127.0.0.1:9000/scholarsphere-dev/cache/2c6b6f30-280c-4126-af21-8325db94cc71.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=asdf/20210118/us-east-1/s3/aws4_request&X-Amz-Date=20210118T155027Z&X-Amz-Expires=900&X-Amz-Signature=76bd006da99af0b0510ff0c39133c445d758529bbbe90669b48bfc333b8ceaeb&X-Amz-SignedHeaders=host
    body:
      encoding: UTF-8
      base64_string: image-content
    headers:
      User-Agent:
      - Faraday v1.0.1
      Content-Md5:
      - MwNrG//gg8XTCCTx/yBLkA==
      Content-Type:
      - application/x-www-form-urlencoded
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Accept-Ranges:
      - bytes
      Content-Length:
      - '0'
      Content-Security-Policy:
      - block-all-mixed-content
      Etag:
      - '"33036b1bffe083c5d30824f1ff204b90"'
      Server:
      - MinIO/RELEASE.2020-07-31T03-39-05Z
      Vary:
      - Origin
      X-Amz-Request-Id:
      - 165B5E58CFF94230
      X-Xss-Protection:
      - 1; mode=block
      Date:
      - Mon, 18 Jan 2021 15:50:27 GMT
    body:
      encoding: UTF-8
      string: ''
  recorded_at: Mon, 18 Jan 2021 15:50:27 GMT
- request:
    method: post
    uri: http://scholarsphere.test/api/v1/ingest
    body:
      encoding: UTF-8
      string: '{"metadata":{"title":"Array of Hashes for Files","creator_aliases_attributes":[{"alias":"John
        Doe","actor_attributes":{"email":"jxd21@psu.edu","given_name":"John","surname":"Doe","psu_id":"jxd21"}}]},"content":[{"file":"{\"id\":\"2c6b6f30-280c-4126-af21-8325db94cc71.png\",\"storage\":\"cache\",\"metadata\":{\"size\":63960,\"filename\":\"image.png\",\"mime_type\":\"image/png\"}}","deposited_at":"2012-05-16T00:00:00+00:00"}],"depositor":{"email":"jxd21@psu.edu","given_name":"John","surname":"Doe","psu_id":"jxd21"},"permissions":{}}'
    headers:
      Content-Type:
      - application/json
      X-Api-Key:
      - db9c21583ea98d16e42a73d9f78897c1ffc1dffcae781eb17f841cf421bd22b7a1a1228226437c5fdf6b6c9a8f537b17
      User-Agent:
      - Faraday v1.0.1
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate
      Content-Type:
      - application/json; charset=utf-8
      Etag:
      - W/"d64687b7925e6d37c7e8e8eba69c3863"
      Referrer-Policy:
      - strict-origin-when-cross-origin
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Frame-Options:
      - SAMEORIGIN
      X-Permitted-Cross-Domain-Policies:
      - none
      X-Request-Id:
      - 239c464a-875c-4284-a5b7-f405899d9f25
      X-Runtime:
      - '0.164415'
      X-Xss-Protection:
      - 1; mode=block
      Date:
      - Mon, 18 Jan 2021 15:50:27 GMT
      Content-Length:
      - '99'
    body:
      encoding: UTF-8
      string: '{"message":"Work was successfully created","url":"/resources/1ede5493-ca4e-43f1-ad2f-24978a26b47e"}'
  recorded_at: Mon, 18 Jan 2021 15:50:27 GMT
recorded_with: VCR 6.0.0
