---
http_interactions:
- request:
    method: post
    uri: https://scholarsphere.test/api/v1/uploads
    body:
      encoding: UTF-8
      string: '{"extension":".png"}'
    headers:
      Content-Type:
      - application/json
      X-Api-Key:
      - db9c21583ea98d16e42a73d9f78897c1ffc1dffcae781eb17f841cf421bd22b7a1a1228226437c5fdf6b6c9a8f537b17
      User-Agent:
      - Faraday v1.0.1
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate
      Content-Type:
      - application/json; charset=utf-8
      Etag:
      - W/"c8134d455290bfb93003976dab3ac19e"
      Referrer-Policy:
      - strict-origin-when-cross-origin
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Frame-Options:
      - SAMEORIGIN
      X-Permitted-Cross-Domain-Policies:
      - none
      X-Request-Id:
      - 61630ddb-b98c-4f1f-8659-43a4bdc942b4
      X-Runtime:
      - '0.038050'
      X-Xss-Protection:
      - 1; mode=block
      Date:
      - Wed, 03 Mar 2021 19:56:34 GMT
      Content-Length:
      - '445'
    body:
      encoding: UTF-8
      string: '{"url":"http://127.0.0.1:9000/scholarsphere-dev/cache/8e93babf-46bb-409d-a906-b296a0482c7a.png?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Credential=scholarsphere%2F20210303%2Fus-east-1%2Fs3%2Faws4_request\u0026X-Amz-Date=20210303T195634Z\u0026X-Amz-Expires=900\u0026X-Amz-SignedHeaders=host\u0026X-Amz-Signature=a97c69943ae98dce92feb89fd65bf0fcde8cd0c3f6f703c5f28698c91c6c5e43","id":"8e93babf-46bb-409d-a906-b296a0482c7a.png","prefix":"cache"}'
  recorded_at: Wed, 03 Mar 2021 19:56:34 GMT
- request:
    method: put
    uri: http://127.0.0.1:9000/scholarsphere-dev/cache/8e93babf-46bb-409d-a906-b296a0482c7a.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=scholarsphere/20210303/us-east-1/s3/aws4_request&X-Amz-Date=20210303T195634Z&X-Amz-Expires=900&X-Amz-Signature=a97c69943ae98dce92feb89fd65bf0fcde8cd0c3f6f703c5f28698c91c6c5e43&X-Amz-SignedHeaders=host
    body:
      encoding: UTF-8
      base64_string: 'imagecontent'
    headers:
      User-Agent:
      - Faraday v1.0.1
      Content-Md5:
      - MwNrG//gg8XTCCTx/yBLkA==
      Content-Type:
      - application/x-www-form-urlencoded
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Accept-Ranges:
      - bytes
      Content-Length:
      - '0'
      Content-Security-Policy:
      - block-all-mixed-content
      Etag:
      - '"33036b1bffe083c5d30824f1ff204b90"'
      Server:
      - MinIO/RELEASE.2020-07-31T03-39-05Z
      Vary:
      - Origin
      X-Amz-Request-Id:
      - 1668ED500121506C
      X-Xss-Protection:
      - 1; mode=block
      Date:
      - Wed, 03 Mar 2021 19:56:34 GMT
    body:
      encoding: UTF-8
      string: ''
  recorded_at: Wed, 03 Mar 2021 19:56:34 GMT
- request:
    method: post
    uri: https://scholarsphere.test/api/v1/ingest
    body:
      encoding: UTF-8
      string: '{"metadata":{"title":"Array of Hashes for Files","creators_attributes":[{"display_name":"Dan
        Coughlin","actor_attributes":{"psu_id":"dmc186","surname":"Coughlin","given_name":"Dan","email":"dmc186@psu.edu"}}]},"content":[{"file":"{\"id\":\"8e93babf-46bb-409d-a906-b296a0482c7a.png\",\"storage\":\"cache\",\"metadata\":{\"size\":63960,\"filename\":\"image.png\",\"mime_type\":\"image/png\"}}","deposited_at":"2012-05-16T00:00:00+00:00"}],"depositor":{"psu_id":"agw13","surname":"Wead","given_name":"Adam","email":"agw13@psu.edu"},"permissions":{}}'
    headers:
      Content-Type:
      - application/json
      X-Api-Key:
      - db9c21583ea98d16e42a73d9f78897c1ffc1dffcae781eb17f841cf421bd22b7a1a1228226437c5fdf6b6c9a8f537b17
      User-Agent:
      - Faraday v1.0.1
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Cache-Control:
      - max-age=0, private, must-revalidate
      Content-Type:
      - application/json; charset=utf-8
      Etag:
      - W/"f92fd8cd039b57472e8b229f97832273"
      Referrer-Policy:
      - strict-origin-when-cross-origin
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Frame-Options:
      - SAMEORIGIN
      X-Permitted-Cross-Domain-Policies:
      - none
      X-Request-Id:
      - 6fb51f09-7cfa-4078-8659-a67f2485787e
      X-Runtime:
      - '0.127356'
      X-Xss-Protection:
      - 1; mode=block
      Date:
      - Wed, 03 Mar 2021 19:56:34 GMT
      Content-Length:
      - '99'
    body:
      encoding: UTF-8
      string: '{"message":"Work was successfully created","url":"/resources/c0a13467-5f00-4c79-a822-eeb229ccb4be"}'
  recorded_at: Wed, 03 Mar 2021 19:56:34 GMT
recorded_with: VCR 6.0.0
